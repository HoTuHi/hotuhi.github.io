(function(e){e.fn.circliful=function(t,n){var r=e.extend({startdegree:0,fgcolor:"#556b2f",bgcolor:"#eee",fill:false,width:15,dimension:200,fontsize:15,percent:50,animationstep:1,iconsize:"20px",iconcolor:"#999",border:"default",complete:null,bordersize:10},t);return this.each(function(){function O(){e(h).attr("width",e(d).width());if(k=="half"){e(h).attr("height",e(d).height()/2)}else{e(h).attr("height",e(d).height())}}function M(t,n,r){e("<span></span>").appendTo(t).addClass(n).text(f).prepend(s).css({"line-height":r+"px","font-size":i.fontsize+"px"})}function _(t,n){e("<span></span>").appendTo(t).addClass("circle-info-half").css("line-height",i.dimension*n+"px").text(l)}function D(t){e.each(n,function(n,s){if(t.data(s)!=undefined){i[s]=t.data(s)}else{i[s]=e(r).attr(s)}if(s=="fill"&&t.data("fill")!=undefined){a=true}})}function P(n){p.clearRect(0,0,h.width,h.height);p.beginPath();p.arc(v,m,b,E,w,false);p.lineWidth=i.bordersize+1;p.strokeStyle=i.bgcolor;p.stroke();if(a){p.fillStyle=i.fill;p.fill()}p.beginPath();p.arc(v,m,b,-C+A,N*n-C+A,false);if(i.border=="outline"){p.lineWidth=i.width+13}else if(i.border=="inline"){p.lineWidth=i.width-13}p.strokeStyle=i.fgcolor;p.stroke();if(x<o){x+=T;requestAnimationFrame(function(){P(Math.min(x,o)/100)},u)}if(x==o&&L&&typeof t!="undefined"){if(e.isFunction(t.complete)){t.complete();L=false}}}var n=["fgcolor","bgcolor","fill","width","dimension","fontsize","animationstep","endPercent","icon","iconcolor","iconsize","border","startdegree","bordersize"];var i={};var s="";var o=0;var u=e(this);var a=false;var f,l;u.addClass("circliful");D(u);if(u.data("text")!=undefined){f=u.data("text");if(u.data("icon")!=undefined){s=e("<i></i>").addClass("fa "+e(this).data("icon")).css({color:i.iconcolor,"font-size":i.iconsize})}if(u.data("type")!=undefined){k=e(this).data("type");if(k=="half"){M(u,"circle-text-half",i.dimension/1.45)}else{M(u,"circle-text",i.dimension)}}else{M(u,"circle-text",i.dimension)}}if(e(this).data("total")!=undefined&&e(this).data("part")!=undefined){var c=e(this).data("total")/100;percent=(e(this).data("part")/c/100).toFixed(3);o=(e(this).data("part")/c).toFixed(3)}else{if(e(this).data("percent")!=undefined){percent=e(this).data("percent")/100;o=e(this).data("percent")}else{percent=r.percent/100}}if(e(this).data("info")!=undefined){l=e(this).data("info");if(e(this).data("type")!=undefined){k=e(this).data("type");if(k=="half"){_(u,.9)}else{_(u,1.25)}}else{_(u,1.25)}}e(this).width(i.dimension+"px");var h=e("<canvas></canvas>").attr({width:i.dimension,height:i.dimension}).appendTo(e(this)).get(0);var p=h.getContext("2d");var d=e(h).parent();var v=h.width/2;var m=h.height/2;var g=i.percent*360;var y=g*(Math.PI/180);var b=h.width/2.5;var w=2.3*Math.PI;var E=0;var S=false;var x=i.animationstep===0?o:0;var T=Math.max(i.animationstep,0);var N=Math.PI*2;var C=Math.PI/2;var k="";var L=true;var A=i.startdegree/180*Math.PI;if(e(this).data("type")!=undefined){k=e(this).data("type");if(k=="half"){w=2*Math.PI;E=3.13;N=Math.PI;C=Math.PI/.996}}O();P(x/100)})}})(jQuery)